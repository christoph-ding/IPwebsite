<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <title> Landing Page </title>
  <link rel="stylesheet" type="text/css" href="../assets/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script type="text/javascript">


  var ip;
  // this is an awesome api!  saved me like a million steps when I discovered it!
  $.getJSON('//gd.geobytes.com/GetCityDetails?callback=?', function(data) {
    geoIPData = JSON.stringify(data, null, 2);
    console.log(geoIPData);
    ip = geoIPData.geobytesipaddress;
    location = geoIPData.geobytesfqcn;
  });

  </script>
</head>
<body>
  <h1> Fun Times With Your IP Address! </h1>  

  <form id="signup-form">
    <input type="email" name='user-email' placeholder="Sign up for spam!"> 
    <input type="submit" value="Do it!">
  </form>

  <input type="button" onclick="location.href='http://localhost:8000/community';" value="Community" />

  <script>
    $('#signup-form').submit(function(event) {
      event.preventDefault();
      var email = $(this).find('input[name="user-email"]').val();
      // TESTING PURPOSES ONLY
      console.log('sending... ', userEmail, ' at ip:', ip );
      $.post('http://localhost:8000/', { email: email, ip: ip, location:location }, function(status) {
        console.log(status);
      })
    })
  </script>

</body>
</html>
